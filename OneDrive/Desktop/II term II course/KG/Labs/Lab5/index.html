<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <title>–†—É—Ö —Ñ—ñ–≥—É—Ä–∏ –Ω–∞ –ø–ª–æ—â–∏–Ω—ñ</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <!-- –í–∏–¥–∞–ª–µ–Ω–æ –∫–ª–∞—Å dark-theme -->
    <div id="app-container">
      <header>
        <h1>GEOMETRY TRANSFORMATION</h1>
        <div id="top-controls">
          <button id="start-stop-animation" class="control-button icon-button">
            ‚ñ∂
          </button>
          <div class="control-group">
            <span>TRANSLATION (N, M):</span>
            <input
              type="number"
              id="vector-n"
              value="50"
              class="inline-input"
            />
            <input
              type="number"
              id="vector-m"
              value="50"
              class="inline-input"
            />
          </div>
          <div class="control-group">
            <span>Œ± ROTATION:</span>
            <input
              type="number"
              id="angle-alpha"
              value="45"
              class="inline-input"
            />
            ¬∞
          </div>
          <button
            id="save-matrix"
            title="–ó–±–µ—Ä–µ–≥—Ç–∏ –ø–æ—Ç–æ—á–Ω—É –º–∞—Ç—Ä–∏—Ü—é –∫–∞–¥—Ä—É"
            class="control-button icon-button file-icon"
          >
            üíæ
          </button>
          <button id="theme-toggle-btn" class="control-button">
            –°–≤—ñ—Ç–ª–∞ –¢–µ–º–∞
          </button>
        </div>
      </header>

      <main id="main-content">
        <div id="controls">
          <div>
            <!-- This div wraps label + inputs for P1 -->
            <label for="square-x1">–õ—ñ–≤–∞ –≤–µ—Ä—Ö–Ω—è (X1, Y1):</label>
            <!-- Label will be updated by JS -->
            <div>
              <!-- This div groups X1 and Y1 inputs -->
              <input type="number" id="square-x1" placeholder="X1" />
              <input type="number" id="square-y1" placeholder="Y1" />
            </div>
          </div>
          <div>
            <!-- This div wraps label + inputs for P2 -->
            <label for="square-x2">–ü—Ä–∞–≤–∞ –Ω–∏–∂–Ω—è (X2, Y2):</label>
            <!-- Label will be updated by JS -->
            <div>
              <!-- This div groups X2 and Y2 inputs -->
              <input type="number" id="square-x2" placeholder="X2" />
              <input type="number" id="square-y2" placeholder="Y2" />
            </div>
          </div>
          <button
            id="align-square-btn"
            class="control-button"
            style="display: none"
          >
            –í–∏—Ä—ñ–≤–Ω—è—Ç–∏ –∫–≤–∞–¥—Ä–∞—Ç
          </button>

          <hr class="separator" />
          <h3>–§—ñ–≥—É—Ä–∏</h3>
          <div id="shape-selector">
            <!-- Icons will be populated by JavaScript -->
          </div>
          <label
            style="
              text-align: center;
              font-size: 0.8em;
              color: var(--text-secondary-color);
              margin-top: 2px;
            "
            >Shapes</label
          >

          <hr class="separator" />
          <div>
            <label for="scale-input">–ú–∞—Å—à—Ç–∞–± (–ø—ñ–∫—Å/—Å–≤—ñ—Ç.–æ–¥.):</label>
            <input
              type="number"
              id="scale-input"
              value="1"
              min="0.01"
              step="0.01"
            />
          </div>
          <hr class="separator" />
          <h3>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–Ω—ñ–º–∞—Ü—ñ—ó:</h3>
          <div>
            <label for="animation-speed">–®–≤–∏–¥–∫—ñ—Å—Ç—å –∞–Ω—ñ–º–∞—Ü—ñ—ó (0.1 - 5.0):</label>
            <input
              type="number"
              id="animation-speed"
              value="1.0"
              min="0.1"
              max="5.0"
              step="0.1"
            />
          </div>
          <hr class="separator" />
          <h3>–¶–µ–Ω—Ç—Ä –æ–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç–∞ –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è:</h3>
          <div>
            <button id="reset-rotation-center-btn" class="control-button">
              –°–∫–∏–Ω—É—Ç–∏ —Ü–µ–Ω—Ç—Ä –æ–±–µ—Ä—Ç–∞–Ω–Ω—è
            </button>
            <label
              style="
                font-size: 0.8em;
                color: var(--text-secondary-color);
                margin-top: 5px;
              "
              >(Alt+Ctrl+DblClick –Ω–∞ –∫–∞–Ω–≤—ñ –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è)</label
            >
          </div>
          <div
            style="
              display: flex;
              flex-direction: row;
              align-items: center;
              margin-top: 10px;
            "
          >
            <input
              type="checkbox"
              id="enable-affine-scaling-cb"
              style="margin-right: 8px; width: auto"
            />
            <label
              for="enable-affine-scaling-cb"
              style="display: inline; margin-bottom: 0"
              >–ê—Ñ—ñ–Ω–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è</label
            >
          </div>
          <div>
            <label for="affine-scale-factor">–ö–æ–µ—Ñ. –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è:</label>
            <input
              type="number"
              id="affine-scale-factor"
              value="1.0"
              min="0.1"
              max="10"
              step="0.1"
              disabled
            />
          </div>

          <hr class="separator" />
          <h3>–†–µ–∂–∏–º–∏:</h3>
          <button id="switch-mode-btn" class="control-button">
            –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏ –Ω–∞ —Ä–µ–∂–∏–º —à–ª—è—Ö—É
          </button>

          <div
            id="path-controls"
            style="
              display: none;
              border: 1px solid var(--border-color);
              padding: 10px;
              margin-top: 10px;
              border-radius: 8px;
            "
          >
            <h4>–ö–µ—Ä—É–≤–∞–Ω–Ω—è —à–ª—è—Ö–æ–º</h4>
            <p style="font-size: 0.8em; color: var(--text-secondary-color)">
              –ö–ª—ñ–∫ –Ω–∞ –∫–∞–Ω–≤–∞—Å—ñ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ—á–∫–∏. Shift+DblClick –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∞
              (N,M) —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó. Ctrl+DblClick –¥–ª—è –¥—Ä—É–≥–æ—ó —Ç–æ—á–∫–∏ —Ñ—ñ–≥—É—Ä–∏.
            </p>
            <button id="start-path-animation-btn" class="control-button">
              –°—Ç–∞—Ä—Ç –∞–Ω—ñ–º–∞—Ü—ñ—ó –ø–æ —à–ª—è—Ö—É
            </button>
            <button
              id="stop-path-animation-btn"
              class="control-button"
              disabled
            >
              –°—Ç–æ–ø –∞–Ω—ñ–º–∞—Ü—ñ—ó –ø–æ —à–ª—è—Ö—É
            </button>
            <button id="remove-last-waypoint-btn" class="control-button">
              –í–∏–¥–∞–ª–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—é —Ç–æ—á–∫—É
            </button>
            <button id="clear-path-btn" class="control-button">
              –û—á–∏—Å—Ç–∏—Ç–∏ —à–ª—è—Ö
            </button>
            <div id="path-message" style="margin-top: 5px; font-size: 0.9em">
              –¢–æ—á–∫–∏ —à–ª—è—Ö—É –Ω–µ –∑–∞–¥–∞–Ω—ñ.
            </div>
          </div>

          <hr class="separator" />
          <h3>–ó–∞–≥–∞–ª—å–Ω—ñ –¥—ñ—ó:</h3>
          <button id="apply-figure" class="control-button">
            –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ñ—ñ–≥—É—Ä—É
          </button>
          <button id="reset-state" class="control-button">–°–∫–∏–Ω—É—Ç–∏ –≤—Å–µ</button>

          <hr class="separator" />
          <h3>–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è:</h3>
          <button id="save-final-matrix" class="control-button">
            –ó–±–µ—Ä–µ–≥—Ç–∏ —Ñ—ñ–Ω–∞–ª—å–Ω—É –º–∞—Ç—Ä–∏—Ü—é
          </button>
          <button id="save-initial-image" class="control-button">
            –ó–±–µ—Ä–µ–≥—Ç–∏ –ø–æ—á–∞—Ç–∫. –∑–æ–±—Ä–∞–∂.
          </button>
          <button id="save-current-image" class="control-button">
            –ó–±–µ—Ä–µ–≥—Ç–∏ –ø–æ—Ç–æ—á–Ω–µ –∑–æ–±—Ä–∞–∂.
          </button>

          <div id="messages" style="margin-top: 15px"></div>
          <div id="matrix-display-container">
            –ü–æ—Ç–æ—á–Ω–∞/–ï—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è:
            <div id="matrix-display">---</div>
          </div>
        </div>
        <canvas id="mainCanvas" width="700" height="700"></canvas>
      </main>
    </div>
    <script src="./script.js"></script>
  </body>
</html>
