const admin = require('firebase-admin');

// !!! ЗАМІНІТЬ ЦЕЙ ШЛЯХ на правильний шлях до вашого файлу serviceAccountKey.json !!!
const serviceAccount = require('C:/Users/ivann/OneDrive/Desktop/G-Hamsters/public/noa2-8fefc-firebase-adminsdk-sm10b-b5199a73f8.json'); // Або ваш актуальний шлях

admin.initializeApp({
    credential: admin.credential.cert(serviceAccount)
});

const db = admin.firestore();
const questionsCollectionRef = db.collection('questions');

function getPoints(questionType) {
    switch (questionType) {
        case 'single':
            return 1;
        case 'multiple':
            return 3;
        case 'open':
            return 5;
        default:
            return 0;
    }
}

const allQuestions = [
    // === 30 питань на вибір однієї правильної === (type: "single")
    {
        moduleId: "module5",
        text: "Яке з трактувань НЕ є основним для терміну \"3D-графіка\"?",
        type: "single",
        options: [
            "Симуляція тривимірності на плоских об'єктах.",
            "Відображення 3D-об'єктів на 3D-пристроях.",
            "Розділ комп'ютерної графіки для зображення об'ємних об'єктів.",
            "Технологія створення двовимірних анімацій."
        ],
        correctAnswer: ["Технологія створення двовимірних анімацій."]
    },
    {
        moduleId: "module5",
        text: "В якій з цих сфер 3D-графіка НЕ використовується широко, згідно з текстом?",
        type: "single",
        options: ["Кінематограф", "Архітектура", "Музична композиція", "Комп'ютерні ігри"],
        correctAnswer: ["Музична композиція"]
    },
    {
        moduleId: "module5",
        text: "Яка основна відмінність 3D-графіки від 2D-графіки?",
        type: "single",
        options: [
            "Використання лише векторних алгоритмів.",
            "Опис і представлення зображення в трьох площинах.",
            "Неможливість виведення на папір.",
            "Застосування виключно в науці."
        ],
        correctAnswer: ["Опис і представлення зображення в трьох площинах."]
    },
    {
        moduleId: "module5",
        text: "Як називається мінімальна поверхня, що використовується для побудови 3D-моделей?",
        type: "single",
        options: ["Піксель", "Вектор", "Полігон", "Текстура"],
        correctAnswer: ["Полігон"]
    },
    {
        moduleId: "module5",
        text: "Яку геометричну фігуру найчастіше обирають в якості полігону?",
        type: "single",
        options: ["Квадрат", "Коло", "Трикутник", "Шестикутник"],
        correctAnswer: ["Трикутник"]
    },
    {
        moduleId: "module5",
        text: "Який етап НЕ входить до послідовності створення реалістичних 3D-зображень?",
        type: "single",
        options: [
            "Попередня підготовка",
            "Створення геометричної моделі сцени",
            "Програмування штучного інтелекту персонажів",
            "Візуалізація сцени"
        ],
        correctAnswer: ["Програмування штучного інтелекту персонажів"]
    },
    {
        moduleId: "module5",
        text: "Як називається віртуальний простір, в якому проектувальник розміщує 3D-об'єкти, світло та камери?",
        type: "single",
        options: ["Кадр", "Шар", "Сцена", "Палітра"],
        correctAnswer: ["Сцена"]
    },
    {
        moduleId: "module5",
        text: "Який процес полягає в побудові геометричної проекції тривимірної моделі на площину екрану?",
        type: "single",
        options: ["Моделювання", "Текстурування", "Рендеринг (візуалізація)", "Анімація"],
        correctAnswer: ["Рендеринг (візуалізація)"]
    },
    {
        moduleId: "module5",
        text: "Що передбачає етап \"попередньої підготовки\" при створенні 3D-сцени?",
        type: "single",
        options: [
            "Налаштування матеріалів об'єктів.",
            "Продумування складу сцени та розміщення об'єктів.",
            "Розміщення віртуальних камер.",
            "Обчислення фінального зображення."
        ],
        correctAnswer: ["Продумування складу сцени та розміщення об'єктів."]
    },
    {
        moduleId: "module5",
        text: "Як називається набір інструментів для створення тривимірних геометричних моделей об'єктів сцени?",
        type: "single",
        options: ["Текстурний редактор", "Геометричний конструктор сцен", "Менеджер освітлення", "Симулятор фізики"],
        correctAnswer: ["Геометричний конструктор сцен"]
    },
    {
        moduleId: "module5",
        text: "Який етап створення 3D-зображення надає сцені візуальної правдоподібності, наближаючи якість до реальної фотографії?",
        type: "single",
        options: [
            "Створення геометричної моделі",
            "Налаштування знімальних камер",
            "Підготовка і призначення матеріалів",
            "Розміщення джерел світла"
        ],
        correctAnswer: ["Підготовка і призначення матеріалів"]
    },
    {
        moduleId: "module5",
        text: "Що НЕ входить до складу сцени (віртуального простору моделювання)?",
        type: "single",
        options: ["Геометрія", "Матеріали", "Джерела світла", "Операційна система комп'ютера"],
        correctAnswer: ["Операційна система комп'ютера"]
    },
    {
        moduleId: "module5",
        text: "Від чого, згідно з текстом, залежить час візуалізації сцени?",
        type: "single",
        options: [
            "Лише від швидкодії комп'ютера.",
            "Лише від складності сцени.",
            "Від складності сцени та швидкодії комп'ютера.",
            "Від кількості встановлених програм."
        ],
        correctAnswer: ["Від складності сцени та швидкодії комп'ютера."]
    },
    {
        moduleId: "module5",
        text: "Яка технологія візуалізації використовує двомірний масив для зберігання глибини кожного екранного пікселя?",
        type: "single",
        options: ["Сканлайн", "Трасування променів", "Z-буфер", "Глобальне освітлення"],
        correctAnswer: ["Z-буфер"]
    },
    {
        moduleId: "module5",
        text: "Яка технологія рендерингу розраховує колір точки картинки шляхом \"кидання\" променя з точки зору спостерігача до перетину з першою поверхнею, не обробляючи відбиті промені?",
        type: "single",
        options: ["Z-буфер", "Сканлайн (Ray casting)", "Трасування променів (Ray tracing)", "Глобальне освітлення"],
        correctAnswer: ["Сканлайн (Ray casting)"]
    },
    {
        moduleId: "module5",
        text: "Яка технологія рендерингу уточнює колір пікселя за рахунок побудови додаткових променів (відбитих, заломлених, тіньових)?",
        type: "single",
        options: ["Z-буфер", "Сканлайн", "Трасування променів (Ray tracing)", "Картографування текстур"],
        correctAnswer: ["Трасування променів (Ray tracing)"]
    },
    {
        moduleId: "module5",
        text: "Яка технологія рендерингу враховує не лише пряме світло, а й відбиті промені світла від інших поверхонь сцени?",
        type: "single",
        options: ["Z-буфер", "Сканлайн", "Трасування променів", "Глобальне освітлення"],
        correctAnswer: ["Глобальне освітлення"]
    },
    {
        moduleId: "module5",
        text: "Яка мова була створена для опису тривимірних зображень для застосування в мережі Інтернет?",
        type: "single",
        options: ["HTML", "Java", "VRML", "Python"],
        correctAnswer: ["VRML"]
    },
    {
        moduleId: "module5",
        text: "Яке розширення зазвичай мають файли, створені мовою VRML?",
        type: "single",
        options: [".obj", ".fbx", ".wrl", ".max"],
        correctAnswer: [".wrl"]
    },
    {
        moduleId: "module5",
        text: "Який з перелічених програмних пакетів є безкоштовним 3D-редактором з відкритим кодом?",
        type: "single",
        options: ["Autodesk 3ds Max", "Maya", "Blender", "Cinema 4D"],
        correctAnswer: ["Blender"]
    },
    {
        moduleId: "module5",
        text: "Як називається технологія доповнення фізичного світу цифровими даними в режимі реального часу?",
        type: "single",
        options: ["Віртуальна реальність (VR)", "Змішана реальність (MR)", "Доповнена реальність (AR)", "Кіберпростір"],
        correctAnswer: ["Доповнена реальність (AR)"]
    },
    {
        moduleId: "module5",
        text: "Яка технологія вимагає повного занурення користувача у віртуальне середовище?",
        type: "single",
        options: ["Доповнена реальність (AR)", "Змішана реальність (MR)", "Віртуальна реальність (VR)", "Голографія"],
        correctAnswer: ["Віртуальна реальність (VR)"]
    },
    {
        moduleId: "module5",
        text: "Яка технологія дозволяє проектувати тривимірні віртуальні об'єкти (голограми) на фізичний простір?",
        type: "single",
        options: ["Доповнена реальність (AR)", "Віртуальна реальність (VR)", "Змішана реальність (MR)", "Стереоскопія"],
        correctAnswer: ["Змішана реальність (MR)"]
    },
    {
        moduleId: "module5",
        text: "Що є математичною основою для створення рухомих зображень у комп'ютерній графіці?",
        type: "single",
        options: ["Диференціальні рівняння", "Афінні перетворення", "Теорія ймовірностей", "Фрактальна геометрія"],
        correctAnswer: ["Афінні перетворення"]
    },
    {
        moduleId: "module5",
        text: "Яке з основних афінних перетворень відповідає за зміну розміру об'єкта?",
        type: "single",
        options: ["Переміщення/Зсув", "Масштабування", "Поворот", "Дзеркальне відображення"],
        correctAnswer: ["Масштабування"]
    },
    {
        moduleId: "module5",
        text: "Що відбувається з об'єктом при масштабуванні з коефіцієнтами a=1, d=-1?",
        type: "single",
        options: ["Збільшення", "Зменшення", "Дзеркальне відображення відносно осі X", "Дзеркальне відображення відносно осі Y"],
        correctAnswer: ["Дзеркальне відображення відносно осі X"]
    },
    {
        moduleId: "module5",
        text: "Для чого вводяться однорідні координати в комп'ютерній графіці?",
        type: "single",
        options: [
            "Для спрощення рендерингу текстур.",
            "Для можливості задання будь-якого афінного перетворення єдиним матричним множенням.",
            "Для зменшення кількості полігонів у моделі.",
            "Для покращення якості глобального освітлення."
        ],
        correctAnswer: ["Для можливості задання будь-якого афінного перетворення єдиним матричним множенням."]
    },
    {
        moduleId: "module5",
        text: "Яке значення зазвичай має фіктивна z-координата (w-координата) в однорідних координатах точки на площині M(x,y)?",
        type: "single",
        options: ["0", "1", "-1", "Залежить від x та y"],
        correctAnswer: ["1"]
    },
    {
        moduleId: "module5",
        text: "Яке перетворення задається матрицею, де елементи a13=m, a23=n, а інші діагональні елементи 1, решта 0 (в однорідних координатах)?",
        type: "single",
        options: ["Масштабування", "Поворот", "Перенесення (зсув)", "Дзеркальне відображення"],
        correctAnswer: ["Перенесення (зсув)"]
    },
    {
        moduleId: "module5",
        text: "Що відбувається, якщо матрицю повороту об'єкта помножити на матрицю зсуву об'єкта (R * T)?",
        type: "single",
        options: [
            "Спочатку об'єкт повертається, потім зсувається.",
            "Спочатку об'єкт зсувається, потім повертається.",
            "Порядок не має значення.",
            "Це неможлива операція."
        ],
        correctAnswer: ["Спочатку об'єкт зсувається, потім повертається."] // При нотації P' = M_final * P, де M_final = R * T, спочатку виконується T
    },

    // === 10 питань на вибір декількох правильних === (type: "multiple")
    {
        moduleId: "module5",
        text: "Які сфери застосування 3D-графіки згадані в тексті?",
        type: "multiple",
        options: [
            "Кінематограф",
            "Сільське господарство",
            "Комп'ютерні ігри",
            "Наука та промисловість",
            "Література"
        ],
        correctAnswer: [
            "Кінематограф",
            "Комп'ютерні ігри",
            "Наука та промисловість"
        ]
    },
    {
        moduleId: "module5",
        text: "З яких елементів складається сцена у 3D-графіці?",
        type: "multiple",
        options: [
            "Геометричні об'єкти",
            "Програмний код рендерера",
            "Матеріали",
            "Джерела світла",
            "Віртуальні камери"
        ],
        correctAnswer: [
            "Геометричні об'єкти",
            "Матеріали",
            "Джерела світла",
            "Віртуальні камери"
        ]
    },
    {
        moduleId: "module5",
        text: "Які етапи включає процес моделювання 3D-сцени?",
        type: "multiple",
        options: [
            "Створення геометричної моделі сцени",
            "Налаштування освітлення і знімальних камер",
            "Візуалізація сцени (рендеринг)",
            "Підготовка і призначення матеріалів",
            "Попередня підготовка (продумування сцени)"
        ],
        correctAnswer: [
            "Створення геометричної моделі сцени",
            "Налаштування освітлення і знімальних камер",
            "Підготовка і призначення матеріалів"
            // "Попередня підготовка" є окремим початковим етапом, а не частиною моделювання
        ]
    },
    {
        moduleId: "module5",
        text: "Які характеристики матеріалів можна налаштовувати при роботі з 3D-графікою?",
        type: "multiple",
        options: ["Сила блиску", "Прозорість", "Вага об'єкта", "Дзеркальність", "Рельєфність"],
        correctAnswer: ["Сила блиску", "Прозорість", "Дзеркальність", "Рельєфність"]
    },
    {
        moduleId: "module5",
        text: "Які технології рендерингу згадані в тексті?",
        type: "multiple",
        options: ["Z-буфер", "Трасування шляху (Path Tracing)", "Сканлайн (Ray casting)", "Глобальне освітлення", "Фотонне картографування"],
        correctAnswer: ["Z-буфер", "Сканлайн (Ray casting)", "Глобальне освітлення"] // Трасування променів (Ray tracing) є, але Path Tracing і Photon Mapping - більш специфічні
    },
    {
        moduleId: "module5",
        text: "Які формати файлів 3D-графіки перелічені в тексті?",
        type: "multiple",
        options: [".JPG", ".WRL", ".MP3", ".3DS", ".MAX"],
        correctAnswer: [".WRL", ".3DS", ".MAX"]
    },
    {
        moduleId: "module5",
        text: "Які технології пов'язані з відображенням віртуальних об'єктів у реальному або повністю віртуальному світі?",
        type: "multiple",
        options: ["Доповнена реальність (AR)", "Bluetooth", "Віртуальна реальність (VR)", "Wi-Fi", "Змішана реальність (MR)"],
        correctAnswer: ["Доповнена реальність (AR)", "Віртуальна реальність (VR)", "Змішана реальність (MR)"]
    },
    {
        moduleId: "module5",
        text: "Які властивості зберігаються при афінних перетвореннях?",
        type: "multiple",
        options: [
            "Паралельність ліній і площин.",
            "Довжини всіх відрізків.",
            "Пропорції паралельних об’єктів.",
            "Кути між прямими.",
            "Площі всіх фігур."
        ],
        correctAnswer: [
            "Паралельність ліній і площин.",
            "Пропорції паралельних об’єктів."
        ]
    },
    {
        moduleId: "module5",
        text: "Які з цих перетворень є основними афінними перетвореннями для рухомих зображень?",
        type: "multiple",
        options: ["Переміщення/Зсув", "Зміна кольору", "Масштабування", "Поворот", "Зміна текстури"],
        correctAnswer: ["Переміщення/Зсув", "Масштабування", "Поворот"]
    },
    {
        moduleId: "module5",
        text: "Які переваги дає використання однорідних координат?",
        type: "multiple",
        options: [
            "Можливість записувати безмежно віддалені точки.",
            "Зменшення часу рендерингу.",
            "Зручність при заданні геометричних перетворень у матричній формі.",
            "Автоматичне створення текстур.",
            "Можливість описати будь-яке афінне перетворення єдиною матрицею."
        ],
        correctAnswer: [
            "Можливість записувати безмежно віддалені точки.",
            "Зручність при заданні геометричних перетворень у матричній формі.",
            "Можливість описати будь-яке афінне перетворення єдиною матрицею."
        ]
    },

    // === 10 питань на одне слово === (type: "open")
    {
        moduleId: "module5",
        text: "Розділ комп'ютерної графіки, призначений для зображення об'ємних об'єктів.",
        type: "open",
        correctAnswer: ["тривимірна"] // або 3D
    },
    {
        moduleId: "module5",
        text: "Мінімальна поверхня, що використовується для побудови 3D-моделей, найчастіше трикутник.",
        type: "open",
        correctAnswer: ["полігон"]
    },
    {
        moduleId: "module5",
        text: "Процес створення математичної моделі сцени та об'єктів у ній в 3D-графіці.",
        type: "open",
        correctAnswer: ["моделювання"]
    },
    {
        moduleId: "module5",
        text: "Процес побудови проекції тривимірної моделі на площину, перетворення векторної моделі на растрову картинку.",
        type: "open",
        correctAnswer: ["рендеринг"] // або візуалізація
    },
    {
        moduleId: "module5",
        text: "Віртуальний простір, у якому дизайнер розміщує 3D-об'єкти, матеріали, світло та камери.",
        type: "open",
        correctAnswer: ["сцена"]
    },
    {
        moduleId: "module5",
        text: "Технологія рендерингу, що спирається на глибину елементів зображення (Z-координату) для визначення видимості.",
        type: "open",
        correctAnswer: ["Z-буфер"]
    },
    {
        moduleId: "module5",
        text: "Технологія, що доповнює фізичний світ цифровими даними в режимі реального часу.",
        type: "open",
        correctAnswer: ["AR"] // або доповнена
    },
    {
        moduleId: "module5",
        text: "Математичні перетворення, що є основою для створення рухомих зображень у комп'ютерній графіці.",
        type: "open",
        correctAnswer: ["афінні"]
    },
    {
        moduleId: "module5",
        text: "Тип афінного перетворення, що відповідає за зміну положення об'єкта без зміни його розміру чи орієнтації.",
        type: "open",
        correctAnswer: ["зсув"] // або переміщення
    },
    {
        moduleId: "module5",
        text: "Координати, що вводяться штучно (наприклад, додаванням третьої компоненти w=1 до 2D-точки) для зручності матричного запису афінних перетворень.",
        type: "open",
        correctAnswer: ["однорідні"]
    }
];

async function uploadQuestions() {
    let successCount = 0;
    let errorCount = 0;

    const targetModuleId = "module5"; // Встановлюємо цільовий moduleId
    console.log(`Розпочато завантаження ${allQuestions.filter(q => q.moduleId === targetModuleId).length} питань для moduleId: "${targetModuleId}"...`);

    for (const questionData of allQuestions) {
        // Переконуємося, що moduleId правильний для кожного питання
        if (questionData.moduleId !== targetModuleId) {
            continue;
        }

        const questionToAdd = {
            moduleId: questionData.moduleId,
            text: questionData.text,
            type: questionData.type,
            correctAnswer: questionData.correctAnswer,
            points: getPoints(questionData.type)
        };

        if (questionData.type === "single" || questionData.type === "multiple") {
            questionToAdd.options = questionData.options;
        }

        try {
            await questionsCollectionRef.add(questionToAdd);
            successCount++;
        } catch (error) {
            errorCount++;
            console.error(`Помилка додавання питання "${questionData.text.substring(0,30)}...": `, error);
        }
    }

    console.log("\n--- Результати завантаження ---");
    console.log(`Успішно додано: ${successCount} питань для moduleId "${targetModuleId}".`);
    if (errorCount > 0) {
        console.log(`Помилок під час додавання: ${errorCount} питань для moduleId "${targetModuleId}".`);
    }
    console.log("Завантаження завершено.");
}

uploadQuestions();